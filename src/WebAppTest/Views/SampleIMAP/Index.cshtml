@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model WebAppTest.Controllers.Models.SampleIMAPModel
@{
    @if (String.IsNullOrEmpty(Model.AccessToken))
    {
        <h2>IMAP with client credentials flow</h2>
        <form action="/sample-imap/client-flow" method="post">

            <label for="email">Email address:</label>
            <input type="text" id="email" name="email" />
            <input type="submit" value="Generate IMAP Client credentials flow link" />
        </form>

        <h2>IMAP with code flow</h2>
        <form action="/sample-imap/code-flow" method="post">

            <input type="submit" value="Generate IMAP code flow link" />
        </form>
    }

    <form action="/sample-imap/test-imap" method="post">

        <input type="hidden" name="state" id="state" value="@Model.State" />
        @if (!String.IsNullOrEmpty(Model.AccessToken))
        {
            <input type="submit" value="Test Imap" />
        }
        @if (!String.IsNullOrEmpty(Model.ImapResult))
        {
            <h2>Result of accessing imap for @Model.EmailAddress: @Model.ImapResult </h2>
        }
    </form>

    @if (!String.IsNullOrEmpty(Model.LoginLink))
    {
        <h3>Link to login</h3>
        <a href="@Model.LoginLink"> @Model.LoginLink</a>
        <h3>Debug login link</h3>
        <pre>@Model.DebugLoginLink</pre>
    }
    @if (!String.IsNullOrEmpty(Model.IdToken))
    {
        <h3>Code flow idp response</h3>
        <pre>@Model.IdpResponseLink</pre>
        <h3>Token Request</h3>
        <pre>@Model.RequestTokenData</pre>
        <h3>Id Token</h3>
        <pre>@Model.IdToken</pre>
        <h3>Access Token</h3>
        <pre>@Model.AccessToken</pre>
        <h3>RefreshToken Token</h3>
        <pre>@Model.RefreshToken</pre>
    }

}
